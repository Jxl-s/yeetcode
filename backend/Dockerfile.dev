FROM node:18-alpine

WORKDIR /app

COPY package.json yarn.lock ./
RUN yarn

COPY . .
RUN yarn prisma generate
RUN yarn prisma migrate dev

EXPOSE 5001

CMD ["yarn", "start:dev"]